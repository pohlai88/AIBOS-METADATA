/**
 * ============================================
 * AIBOS DESIGN SYSTEM - Tailwind CSS v4
 * ============================================
 * 
 * Based on official v4 patterns from:
 * - https://tailwindcss.com/docs/installation/using-postcss
 * - Real-world monorepo: turbo-with-tailwind-v4
 * 
 * Philosophy:
 * 1. @import "tailwindcss" - Single import
 * 2. @theme - Auto-generates utilities from tokens
 * 3. OKLCH colors - Perceptually uniform, human-readable
 * 4. Minimal config - Most logic lives here, not in JS
 */

@import "tailwindcss";

/* ============================================ */
/* CUSTOM VARIANTS                             */
/* ============================================ */

/**
 * Dark mode variant
 * Usage: dark:bg-primary, dark:text-white
 */
@custom-variant dark (&:where(.dark, .dark *));

/**
 * Combined hover + focus
 * Usage: hocus:scale-105
 */
@custom-variant hocus (&:hover, &:focus);

/**
 * Group hover + focus (for parent-child interactions)
 * Usage: group-hocus:opacity-100
 */
@custom-variant group-hocus (.group:where(:hover, :focus) &);

/* ============================================ */
/* @THEME - Auto-Generated Utilities           */
/* These tokens automatically become utilities */
/* ============================================ */

@theme {
  /* ========================================== */
  /* COLOR SYSTEM - OKLCH Format               */
  /* Generated with: https://www.colorpalett.es/ */
  /* ========================================== */
  
  /**
   * Primary Color Scale
   * Usage: bg-primary-500, text-primary-700, etc.
   */
  --color-primary-50: oklch(0.95 0.02 250);
  --color-primary-100: oklch(0.90 0.05 250);
  --color-primary-200: oklch(0.80 0.10 250);
  --color-primary-300: oklch(0.70 0.15 250);
  --color-primary-400: oklch(0.65 0.20 250);
  --color-primary-500: oklch(0.62 0.25 250);   /* Default */
  --color-primary-600: oklch(0.55 0.27 250);
  --color-primary-700: oklch(0.48 0.25 250);
  --color-primary-800: oklch(0.40 0.20 250);
  --color-primary-900: oklch(0.30 0.15 250);
  --color-primary-950: oklch(0.20 0.10 250);

  /**
   * Primary base (maps to default shade)
   * Usage: bg-primary, text-primary (without number)
   */
  --color-primary: var(--color-primary-500);

  /**
   * Semantic Colors
   * Usage: bg-success, text-danger, border-warning
   */
  --color-success: oklch(0.65 0.20 150);
  --color-warning: oklch(0.75 0.18 70);
  --color-danger: oklch(0.60 0.24 25);
  --color-info: oklch(0.65 0.15 230);

  /**
   * Metadata Domain Colors
   * Usage: bg-metadata-glossary, text-metadata-lineage
   */
  --color-metadata-glossary: oklch(0.60 0.18 250);
  --color-metadata-lineage: oklch(0.62 0.20 280);
  --color-metadata-quality: oklch(0.58 0.16 200);
  --color-metadata-governance: oklch(0.55 0.14 150);
  --color-metadata-tags: oklch(0.64 0.12 180);
  --color-metadata-kpi: oklch(0.68 0.16 120);

  /**
   * Finance Domain Colors (IFRS/MFRS)
   * Usage: text-finance-revenue, bg-finance-asset
   */
  --color-finance-revenue: oklch(0.65 0.20 150);
  --color-finance-expense: oklch(0.62 0.22 25);
  --color-finance-asset: oklch(0.60 0.16 220);
  --color-finance-liability: oklch(0.58 0.18 40);
  --color-finance-equity: oklch(0.66 0.14 280);

  /**
   * Governance Tiers
   * Usage: bg-tier-1, border-tier-2
   */
  --color-tier-1: oklch(0.60 0.24 25);    /* Critical - Red */
  --color-tier-2: oklch(0.70 0.18 70);    /* High - Orange */
  --color-tier-3: oklch(0.75 0.12 120);   /* Medium - Yellow */
  --color-tier-4: oklch(0.65 0.10 200);   /* Low - Blue */

  /* ========================================== */
  /* TYPOGRAPHY - Type Scale (1.25 ratio)      */
  /* Usage: text-xs, text-3xl, text-display    */
  /* ========================================== */
  
  --font-size-xs: 0.75rem;      /* 12px */
  --font-size-sm: 0.875rem;     /* 14px */
  --font-size-base: 1rem;       /* 16px - Body text */
  --font-size-lg: 1.125rem;     /* 18px */
  --font-size-xl: 1.25rem;      /* 20px */
  --font-size-2xl: 1.5rem;      /* 24px - H2 */
  --font-size-3xl: 1.875rem;    /* 30px - H1 */
  --font-size-4xl: 2.25rem;     /* 36px */
  --font-size-5xl: 3rem;        /* 48px - Display */
  --font-size-6xl: 3.75rem;     /* 60px - Hero */

  /* ========================================== */
  /* SPACING - 8-Point Grid                    */
  /* Usage: p-4, m-6, gap-8                    */
  /* ========================================== */
  
  --spacing-1: 0.25rem;   /* 4px - Micro spacing */
  --spacing-2: 0.5rem;    /* 8px */
  --spacing-3: 0.75rem;   /* 12px */
  --spacing-4: 1rem;      /* 16px - Base unit */
  --spacing-5: 1.5rem;    /* 24px */
  --spacing-6: 2rem;      /* 32px - Section spacing */
  --spacing-7: 2.5rem;    /* 40px */
  --spacing-8: 3rem;      /* 48px */
  --spacing-10: 4rem;     /* 64px */
  --spacing-12: 6rem;     /* 96px - Large gaps */

  /* ========================================== */
  /* ELEVATION - Shadow System                 */
  /* Usage: shadow-raised, shadow-floating     */
  /* ========================================== */
  
  --shadow-raised: 0 1px 3px oklch(0 0 0 / 0.1);
  --shadow-floating: 0 4px 6px oklch(0 0 0 / 0.1);
  --shadow-overlay: 0 10px 15px oklch(0 0 0 / 0.1);
  --shadow-high: 0 20px 25px oklch(0 0 0 / 0.1);

  /* ========================================== */
  /* MOTION - Animation Tokens                 */
  /* Usage: duration-fast, ease-standard       */
  /* ========================================== */
  
  --duration-fast: 120ms;
  --duration-normal: 200ms;
  --duration-slow: 280ms;
  
  --ease-standard: cubic-bezier(0.4, 0, 0.2, 1);
  --ease-in: cubic-bezier(0.4, 0, 1, 1);
  --ease-out: cubic-bezier(0, 0, 0.2, 1);

  /* ========================================== */
  /* LAYOUT - Max Widths                       */
  /* Usage: max-w-sm, max-w-lg, max-w-xl       */
  /* ========================================== */
  
  --max-width-sm: 24rem;      /* 384px */
  --max-width-md: 28rem;      /* 448px */
  --max-width-lg: 32rem;      /* 512px */
  --max-width-xl: 36rem;      /* 576px */
  --max-width-2xl: 42rem;     /* 672px */

  /* ========================================== */
  /* CONTAINER QUERIES                         */
  /* Usage: @container(min-width: sm)          */
  /* ========================================== */
  
  --container-sm: 24rem;
  --container-md: 28rem;
  --container-lg: 32rem;
  --container-xl: 36rem;
  --container-2xl: 42rem;

  /* ========================================== */
  /* 3D TRANSFORMS - Perspective              */
  /* Usage: perspective-normal                 */
  /* ========================================== */
  
  --perspective-normal: 1000px;
  --perspective-distant: 1500px;
}

/* ============================================ */
/* BASE LAYER - Semantic Tokens & Dark Mode    */
/* ============================================ */

@layer base {
  /**
   * Light Theme (Default)
   */
  :root {
    /* Semantic color mappings */
    --color-text: oklch(0.20 0 0);              /* Near black */
    --color-text-muted: oklch(0.45 0 0);        /* Gray */
    --color-text-subtle: oklch(0.60 0 0);       /* Light gray */
    --color-background: oklch(1 0 0);           /* White */
    --color-background-subtle: oklch(0.98 0 0); /* Off-white */
    --color-background-muted: oklch(0.95 0 0);  /* Light gray bg */
    --color-border: oklch(0.88 0 0);            /* Border gray */
    --color-border-muted: oklch(0.92 0 0);      /* Subtle border */

    /* System preference */
    color-scheme: light;
  }

  /**
   * Dark Theme
   * Applied when <html class="dark">
   * 
   * NOTE: Subtle brand hue (250) for richer, branded dark theme
   */
  .dark {
    /* Semantic color overrides with subtle blue tint */
    --color-text: oklch(0.95 0 0);              /* Near white */
    --color-text-muted: oklch(0.65 0 0);        /* Light gray */
    --color-text-subtle: oklch(0.50 0 0);       /* Darker gray */
    --color-background: oklch(0.15 0.01 250);        /* Near black with subtle brand hue */
    --color-background-subtle: oklch(0.18 0.01 250); /* Slightly lighter with hue */
    --color-background-muted: oklch(0.22 0.01 250);  /* Card background with hue */
    --color-border: oklch(0.30 0 0);            /* Border gray */
    --color-border-muted: oklch(0.25 0 0);      /* Subtle border */

    /* System preference */
    color-scheme: dark;
  }

  /**
   * Body defaults
   */
  body {
    color: var(--color-text);
    background-color: var(--color-background);
    font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    line-height: 1.5;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /**
   * Typography base
   */
  h1, h2, h3, h4, h5, h6 {
    font-weight: 600;
    line-height: 1.2;
    color: var(--color-text);
  }
}

/* ============================================ */
/* UTILITIES LAYER - Custom Utilities          */
/* ============================================ */

@layer utilities {
  /**
   * Glassmorphism effect
   * Usage: class="glass"
   */
  .glass {
    backdrop-filter: blur(12px);
    background-color: oklch(1 0 0 / 0.8);
    border: 1px solid oklch(0 0 0 / 0.1);
  }

  .dark .glass {
    background-color: oklch(0.15 0 0 / 0.8);
    border-color: oklch(1 1 1 / 0.1);
  }

  /**
   * Text gradients
   * Usage: class="text-gradient"
   */
  .text-gradient {
    background: linear-gradient(
      to right,
      oklch(0.62 0.25 250),
      oklch(0.65 0.20 150)
    );
    background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  .text-gradient-finance {
    background: linear-gradient(
      135deg,
      oklch(0.65 0.20 150),
      oklch(0.60 0.16 220)
    );
    background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  .text-gradient-metadata {
    background: linear-gradient(
      135deg,
      oklch(0.60 0.18 250),
      oklch(0.62 0.20 280),
      oklch(0.58 0.16 200)
    );
    background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  /**
   * 3D card effects
   * Usage: class="card-3d"
   */
  .card-3d {
    transform-style: preserve-3d;
    transition: transform 200ms cubic-bezier(0.4, 0, 0.2, 1);
  }

  .card-3d:hover {
    transform: rotateX(5deg) rotateY(-5deg);
  }

  .card-3d-content {
    transform: translateZ(30px);
  }

  /**
   * Perspective containers
   * Usage: class="perspective-normal"
   */
  .perspective-normal {
    perspective: var(--perspective-normal);
  }

  .perspective-distant {
    perspective: var(--perspective-distant);
  }

  /**
   * Custom animations
   */
  @keyframes fade-in {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes fade-in-up {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes pulse-glow {
    0%, 100% {
      box-shadow: 0 0 10px oklch(0.62 0.25 250 / 0.3);
    }
    50% {
      box-shadow: 0 0 20px oklch(0.62 0.25 250 / 0.6);
    }
  }

  @keyframes gradient-x {
    0%, 100% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
  }

  @keyframes grid-move {
    0% {
      transform: translate(0, 0);
    }
    100% {
      transform: translate(40px, 40px);
    }
  }

  @keyframes spin-slow {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }

  /* Aurora animations - Aceternity-inspired */
  @keyframes aurora {
    0% {
      background-position: 50% 50%, 50% 50%, 50% 50%;
    }
    25% {
      background-position: 60% 40%, 40% 60%, 55% 45%;
    }
    50% {
      background-position: 40% 60%, 60% 40%, 45% 55%;
    }
    75% {
      background-position: 55% 45%, 45% 55%, 60% 40%;
    }
    100% {
      background-position: 50% 50%, 50% 50%, 50% 50%;
    }
  }

  @keyframes aurora-reverse {
    0% {
      background-position: 50% 50%, 50% 50%;
    }
    50% {
      background-position: 40% 60%, 60% 40%;
    }
    100% {
      background-position: 50% 50%, 50% 50%;
    }
  }

  @keyframes float {
    0%, 100% {
      transform: translate(0, 0) scale(1);
    }
    50% {
      transform: translate(20px, -20px) scale(1.05);
    }
  }

  @keyframes float-delayed {
    0%, 100% {
      transform: translate(0, 0) scale(1);
    }
    50% {
      transform: translate(-15px, 15px) scale(1.03);
    }
  }

  @keyframes float-slow {
    0%, 100% {
      transform: translate(0, 0) scale(1);
    }
    50% {
      transform: translate(10px, -10px) scale(1.02);
    }
  }

  .animate-aurora {
    animation: aurora 15s ease-in-out infinite;
  }

  .animate-aurora-reverse {
    animation: aurora-reverse 12s ease-in-out infinite;
  }

  .animate-float {
    animation: float 8s ease-in-out infinite;
  }

  .animate-float-delayed {
    animation: float-delayed 10s ease-in-out infinite;
    animation-delay: 2s;
  }

  .animate-float-slow {
    animation: float-slow 12s ease-in-out infinite;
    animation-delay: 4s;
  }

  /* Nike-style slide up animation */
  @keyframes slide-up {
    from {
      opacity: 0;
      transform: translateY(40px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-slide-up {
    animation: slide-up 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  }

  .animate-fade-in {
    animation: fade-in 0.5s ease-out forwards;
  }

  .animate-fade-in-up {
    animation: fade-in-up 0.6s ease-out forwards;
  }

  .animate-pulse-glow {
    animation: pulse-glow 2s infinite;
  }

  .animate-gradient-x {
    background-size: 200% 200%;
    animation: gradient-x 3s ease infinite;
  }

  .animate-spin-slow {
    animation: spin-slow 3s linear infinite;
  }
}

/* ============================================ */
/* ACCESSIBILITY                               */
/* ============================================ */

/**
 * Respect user's motion preferences
 * PREMIUM APPROACH: Override motion tokens at root
 * Cleaner than using * !important
 */
@media (prefers-reduced-motion: reduce) {
  :root {
    --duration-fast: 1ms !important;
    --duration-normal: 1ms !important;
    --duration-slow: 1ms !important;
  }
}

/**
 * Focus visible styles
 */
*:focus-visible {
  outline: 2px solid oklch(0.62 0.25 250);
  outline-offset: 2px;
}
