/**
 * AIBOS Design System - Tailwind CSS v4.0 Full Implementation
 * 
 * This CSS leverages ALL Tailwind v4 features:
 * - @theme directive for CSS-first configuration
 * - @layer for custom utilities
 * - @variant for custom state modifiers
 * - Container queries
 * - 3D transforms
 * - Advanced gradients
 * - Enter/exit transitions
 * - Dynamic utility values
 * - And much more!
 * 
 * Reference: https://tailwindcss.com/blog/tailwindcss-v4
 */

/* ============================================ */
/* LAYER 1: IMPORT TAILWIND                    */
/* ============================================ */
@import "tailwindcss";

/* ============================================ */
/* LAYER 2: @THEME - CSS-FIRST CONFIGURATION   */
/* Dynamic utilities generated automatically!  */
/* ============================================ */
@theme {
  /* ===== SPACING SCALE (8-Point Grid) ===== */
  /* Generates: p-*, m-*, gap-*, space-*, etc. */
  --spacing-1: 0.25rem;   /* 4px */
  --spacing-2: 0.5rem;    /* 8px */
  --spacing-3: 0.75rem;   /* 12px */
  --spacing-4: 1rem;      /* 16px */
  --spacing-5: 1.5rem;    /* 24px */
  --spacing-6: 2rem;      /* 32px */
  --spacing-7: 2.5rem;    /* 40px */
  --spacing-8: 3rem;      /* 48px */
  --spacing-10: 4rem;     /* 64px */
  --spacing-12: 6rem;     /* 96px */

  /* ===== TYPOGRAPHY SCALE ===== */
  --font-size-xs: 0.75rem;     /* 12px */
  --font-size-sm: 0.875rem;    /* 14px */
  --font-size-base: 1rem;      /* 16px */
  --font-size-lg: 1.125rem;    /* 18px */
  --font-size-xl: 1.25rem;     /* 20px */
  --font-size-2xl: 1.5rem;     /* 24px */
  --font-size-3xl: 1.875rem;   /* 30px */
  --font-size-4xl: 2.25rem;    /* 36px */
  --font-size-5xl: 3rem;       /* 48px */
  --font-size-6xl: 3.75rem;    /* 60px */

  /* ===== LAYOUT SCALE ===== */
  --layout-max-width-sm: 640px;
  --layout-max-width-md: 768px;
  --layout-max-width-lg: 1024px;
  --layout-max-width-xl: 1280px;
  --layout-max-width-2xl: 1536px;
  --layout-sidebar-width: 280px;

  /* ===== MOTION TOKENS ===== */
  --motion-duration-fast: 120ms;
  --motion-duration-normal: 200ms;
  --motion-duration-slow: 280ms;
  --motion-ease-standard: cubic-bezier(0.4, 0, 0.2, 1);
  --motion-ease-in: cubic-bezier(0.4, 0, 1, 1);
  --motion-ease-out: cubic-bezier(0, 0, 0.2, 1);

  /* ===== CONTAINER QUERY BREAKPOINTS ===== */
  --container-xs: 20rem;
  --container-sm: 24rem;
  --container-md: 28rem;
  --container-lg: 32rem;
  --container-xl: 36rem;
  --container-2xl: 42rem;
}

/* ============================================ */
/* LAYER 3: DESIGN TOKENS (CSS VARIABLES)      */
/* These are NOT in @theme to keep them        */
/* separate from Tailwind's automatic          */
/* utility generation                          */
/* ============================================ */

:root {
  /* ===== CORE COLORS (RGB for color-mix() support) ===== */
  --color-primary-rgb: 59 130 246;
  --color-primary-hover-rgb: 37 99 235;
  --color-success-rgb: 16 185 129;
  --color-warning-rgb: 245 158 11;
  --color-danger-rgb: 239 68 68;
  --color-info-rgb: 14 165 233;
  
  /* ===== TEXT COLORS ===== */
  --color-text-base: 17 24 39;
  --color-text-muted: 107 114 128;
  --color-text-subtle: 156 163 175;
  
  /* ===== BACKGROUND COLORS ===== */
  --color-background-base: 255 255 255;
  --color-background-subtle: 249 250 251;
  --color-background-muted: 243 244 246;
  
  /* ===== BORDER COLORS ===== */
  --color-border-base: 229 231 235;
  --color-border-muted: 243 244 246;
  
  /* ===== METADATA COLORS ===== */
  --color-metadata-glossary: 59 130 246;
  --color-metadata-lineage: 139 92 246;
  --color-metadata-quality: 16 185 129;
  --color-metadata-governance: 245 158 11;
  --color-metadata-tags: 236 72 153;
  --color-metadata-kpi: 14 165 233;
  
  /* ===== FINANCE COLORS ===== */
  --color-finance-revenue: 16 185 129;
  --color-finance-expense: 239 68 68;
  --color-finance-asset: 59 130 246;
  --color-finance-liability: 245 158 11;
  --color-finance-equity: 139 92 246;
  
  /* ===== TIER COLORS ===== */
  --color-tier-1: 239 68 68;
  --color-tier-2: 245 158 11;
  --color-tier-3: 59 130 246;
  --color-tier-4: 107 114 128;
  
  /* ===== ELEVATION (SHADOWS) ===== */
  --shadow-raised: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
  --shadow-floating: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
  --shadow-overlay: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
  --shadow-high: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
}

/* ============================================ */
/* LAYER 4: DARK THEME OVERRIDES               */
/* ============================================ */

.dark {
  /* Core Colors - Lighter for dark mode */
  --color-primary-rgb: 96 165 250;
  --color-primary-hover-rgb: 59 130 246;
  
  /* Text Colors - Inverted */
  --color-text-base: 243 244 246;
  --color-text-muted: 156 163 175;
  --color-text-subtle: 107 114 128;
  
  /* Background Colors - Inverted */
  --color-background-base: 17 24 39;
  --color-background-subtle: 31 41 55;
  --color-background-muted: 55 65 81;
  
  /* Border Colors - Inverted */
  --color-border-base: 75 85 99;
  --color-border-muted: 55 65 81;
  
  /* Shadows - Darker in dark mode */
  --shadow-raised: 0 1px 3px 0 rgb(0 0 0 / 0.3), 0 1px 2px -1px rgb(0 0 0 / 0.2);
  --shadow-floating: 0 4px 6px -1px rgb(0 0 0 / 0.3), 0 2px 4px -2px rgb(0 0 0 / 0.2);
  --shadow-overlay: 0 10px 15px -3px rgb(0 0 0 / 0.4), 0 4px 6px -4px rgb(0 0 0 / 0.3);
  --shadow-high: 0 20px 25px -5px rgb(0 0 0 / 0.5), 0 8px 10px -6px rgb(0 0 0 / 0.4);
  
  /* Metadata Colors - Adjusted */
  --color-metadata-glossary: 96 165 250;
  --color-metadata-lineage: 167 139 250;
  --color-metadata-quality: 52 211 153;
  --color-metadata-governance: 251 191 36;
  --color-metadata-tags: 244 114 182;
  --color-metadata-kpi: 56 189 248;
  
  /* Finance Colors - Adjusted */
  --color-finance-revenue: 52 211 153;
  --color-finance-expense: 248 113 113;
  --color-finance-asset: 96 165 250;
  --color-finance-liability: 251 191 36;
  --color-finance-equity: 167 139 250;

  /* Native scrollbar theming (NEW v4 feature!) */
  color-scheme: dark;
}

/* Light mode scrollbar */
:root {
  color-scheme: light;
}

/* ============================================ */
/* LAYER 5: @VARIANT - CUSTOM STATE MODIFIERS  */
/* Create your own variants like hover:, dark: */
/* ============================================ */

/* Both hover AND focus */
@variant hocus (&:hover, &:focus);
@variant group-hocus (.group:hover &, .group:focus &);

/* Data attribute variants */
@variant data-active (&[data-active="true"]);
@variant data-inactive (&[data-active="false"]);
@variant data-current (&[data-current="true"]);

/* Financial states */
@variant data-positive (&[data-positive="true"]);
@variant data-negative (&[data-negative="true"]);
@variant data-neutral (&[data-neutral="true"]);

/* Metadata tier variants */
@variant tier-1 (&[data-tier="1"]);
@variant tier-2 (&[data-tier="2"]);
@variant tier-3 (&[data-tier="3"]);
@variant tier-4 (&[data-tier="4"]);

/* ARIA states */
@variant aria-selected (&[aria-selected="true"]);
@variant aria-expanded (&[aria-expanded="true"]);
@variant aria-invalid (&[aria-invalid="true"]);

/* ============================================ */
/* LAYER 6: @LAYER UTILITIES                   */
/* Custom utilities that work with variants    */
/* ============================================ */

@layer utilities {
  /* ===== TEXT EFFECTS ===== */
  
  /* Gradient text */
  .text-gradient {
    background: linear-gradient(to right, rgb(var(--color-primary-rgb)), rgb(var(--color-success-rgb)));
    background-clip: text;
    -webkit-text-fill-color: transparent;
  }
  
  .text-gradient-finance {
    background: linear-gradient(135deg, 
      rgb(var(--color-finance-revenue)),
      rgb(var(--color-finance-asset))
    );
    background-clip: text;
    -webkit-text-fill-color: transparent;
  }
  
  .text-gradient-metadata {
    background: linear-gradient(135deg,
      rgb(var(--color-metadata-glossary)),
      rgb(var(--color-metadata-lineage)),
      rgb(var(--color-metadata-quality))
    );
    background-clip: text;
    -webkit-text-fill-color: transparent;
  }
  
  /* ===== GLASSMORPHISM ===== */
  
  .glass {
    backdrop-filter: blur(12px);
    background-color: color-mix(in srgb, rgb(var(--color-background-base)) 80%, transparent);
    border: 1px solid color-mix(in srgb, rgb(var(--color-border-base)) 30%, transparent);
  }
  
  .glass-strong {
    backdrop-filter: blur(24px);
    background-color: color-mix(in srgb, rgb(var(--color-background-base)) 90%, transparent);
    border: 1px solid color-mix(in srgb, rgb(--color-border-base) 50%, transparent);
  }
  
  /* ===== TRUNCATE WITH FADE ===== */
  
  .truncate-fade {
    position: relative;
    overflow: hidden;
    
    &::after {
      content: "";
      position: absolute;
      right: 0;
      top: 0;
      height: 100%;
      width: 3rem;
      background: linear-gradient(to right, transparent, rgb(var(--color-background-base)));
    }
  }
  
  /* ===== FINANCE UTILITIES ===== */
  
  .finance-positive {
    color: rgb(var(--color-finance-revenue));
    font-weight: 600;
    
    &::before {
      content: "+";
      margin-right: 0.125rem;
    }
  }
  
  .finance-negative {
    color: rgb(var(--color-finance-expense));
    font-weight: 600;
    
    &::before {
      content: "-";
      margin-right: 0.125rem;
    }
  }
  
  .finance-neutral {
    color: rgb(var(--color-text-muted));
    font-weight: 500;
  }
  
  /* ===== METADATA BADGES ===== */
  
  .metadata-badge {
    display: inline-flex;
    align-items: center;
    padding: 0.25rem 0.5rem;
    border-radius: 0.375rem;
    font-size: 0.75rem;
    font-weight: 500;
    line-height: 1;
  }
  
  .metadata-badge-glossary {
    background-color: color-mix(in srgb, rgb(var(--color-metadata-glossary)) 10%, transparent);
    color: rgb(var(--color-metadata-glossary));
  }
  
  .metadata-badge-tier-1 {
    background-color: color-mix(in srgb, rgb(var(--color-tier-1)) 10%, transparent);
    color: rgb(var(--color-tier-1));
    border: 1px solid color-mix(in srgb, rgb(var(--color-tier-1)) 30%, transparent);
  }
  
  /* ===== 3D CARD EFFECTS (NEW V4 FEATURE!) ===== */
  
  .card-3d {
    transform-style: preserve-3d;
    perspective: 1000px;
    transition: transform var(--motion-duration-normal) var(--motion-ease-standard);
    
    &:hover {
      transform: rotateX(5deg) rotateY(-5deg) translateY(-4px);
    }
  }
  
  .card-3d-content {
    transform: translateZ(50px);
  }
  
  /* ===== GRID TEMPLATES ===== */
  
  .grid-dashboard {
    display: grid;
    grid-template-columns: var(--layout-sidebar-width) 1fr;
    grid-template-rows: auto 1fr auto;
    gap: var(--spacing-4);
  }
  
  .grid-metadata-cards {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: var(--spacing-4);
  }
  
  .grid-kpi {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: var(--spacing-6);
    
    @media (max-width: 768px) {
      grid-template-columns: repeat(2, 1fr);
    }
  }
  
  /* ===== ANIMATIONS ===== */
  
  @keyframes fade-in {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  @keyframes slide-in-right {
    from {
      opacity: 0;
      transform: translateX(20px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }
  
  @keyframes pulse-glow {
    0%, 100% {
      box-shadow: 0 0 5px color-mix(in srgb, rgb(var(--color-primary-rgb)) 50%, transparent);
    }
    50% {
      box-shadow: 0 0 20px rgb(var(--color-primary-rgb));
    }
  }
  
  .animate-fade-in {
    animation: fade-in 0.5s ease-out;
  }
  
  .animate-slide-in-right {
    animation: slide-in-right 0.5s ease-out;
  }
  
  .animate-pulse-glow {
    animation: pulse-glow 2s infinite;
  }
  
  /* ===== SCROLL SNAP ===== */
  
  .snap-container {
    scroll-snap-type: x mandatory;
    overflow-x: auto;
    scrollbar-width: thin;
  }
  
  .snap-item {
    scroll-snap-align: start;
  }
}

/* ============================================ */
/* LAYER 7: BASE STYLES                        */
/* ============================================ */

body {
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, sans-serif;
  font-size: var(--font-size-base);
  line-height: 1.5;
  color: rgb(var(--color-text-base));
  background-color: rgb(var(--color-background-base));
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* ============================================ */
/* LAYER 8: ACCESSIBILITY                      */
/* ============================================ */

/* Focus visible for keyboard navigation */
*:focus-visible {
  outline: 2px solid rgb(var(--color-primary-rgb));
  outline-offset: 2px;
}

/* Reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

