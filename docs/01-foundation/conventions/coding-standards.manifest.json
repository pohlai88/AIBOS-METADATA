{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "id": "convention.coding-standards",
  "type": "convention",
  "version": "1.0.0",
  "title": "Coding Standards",
  "description": "Defines coding standards for TypeScript, React, Next.js, and MCP development across the AI-BOS Platform",
  "lastUpdated": "2025-11-24",
  "status": "active",
  "scope": "all",
  "governanceLevel": "strict",
  "document": {
    "path": "docs/01-foundation/conventions/coding-standards.md",
    "format": "markdown",
    "source": "human-written",
    "mcpAutoGenerate": false,
    "humanEditable": true
  },
  "rules": [
    {
      "category": "typescript",
      "rules": [
        {
          "pattern": "interface-for-objects",
          "appliesTo": ["props", "object-shapes"],
          "enforcement": "strict"
        },
        {
          "pattern": "type-for-unions",
          "appliesTo": ["union-types", "intersections"],
          "enforcement": "strict"
        },
        {
          "pattern": "no-any",
          "appliesTo": ["all-code"],
          "enforcement": "strict",
          "exception": "use-unknown-if-truly-unknown"
        }
      ]
    },
    {
      "category": "react",
      "rules": [
        {
          "pattern": "server-component-default",
          "appliesTo": ["react-components"],
          "enforcement": "strict"
        },
        {
          "pattern": "use-client-directive",
          "appliesTo": ["client-components"],
          "enforcement": "strict",
          "location": "first-line"
        },
        {
          "pattern": "forwardRef-for-refs",
          "appliesTo": ["components-with-refs"],
          "enforcement": "strict"
        },
        {
          "pattern": "displayName-required",
          "appliesTo": ["all-components"],
          "enforcement": "strict"
        }
      ]
    },
    {
      "category": "nextjs",
      "rules": [
        {
          "pattern": "app-router-structure",
          "appliesTo": ["nextjs-apps"],
          "enforcement": "strict"
        },
        {
          "pattern": "async-server-components",
          "appliesTo": ["data-fetching"],
          "enforcement": "strict"
        },
        {
          "pattern": "server-actions-validation",
          "appliesTo": ["server-actions"],
          "enforcement": "strict",
          "validation": "zod-or-equivalent"
        }
      ]
    },
    {
      "category": "styling",
      "rules": [
        {
          "pattern": "token-based-only",
          "appliesTo": ["all-styling"],
          "enforcement": "strict",
          "forbidden": ["raw-hex", "tailwind-palette", "arbitrary-values"]
        },
        {
          "pattern": "css-variables-server",
          "appliesTo": ["server-components"],
          "enforcement": "strict"
        }
      ]
    },
    {
      "category": "mcp",
      "rules": [
        {
          "pattern": "governance-metadata",
          "appliesTo": ["all-mcp-responses"],
          "enforcement": "strict"
        },
        {
          "pattern": "server-structure",
          "appliesTo": ["mcp-servers"],
          "enforcement": "strict"
        }
      ]
    },
    {
      "category": "accessibility",
      "rules": [
        {
          "pattern": "aria-attributes",
          "appliesTo": ["interactive-elements"],
          "enforcement": "strict"
        },
        {
          "pattern": "keyboard-navigation",
          "appliesTo": ["interactive-components"],
          "enforcement": "strict"
        },
        {
          "pattern": "color-contrast",
          "appliesTo": ["all-text"],
          "enforcement": "strict",
          "standard": "WCAG-2.1-AA",
          "ratio": "4.5:1"
        }
      ]
    }
  ],
  "constitution": {
    "components": "../../../packages/ui/constitution/components.yml",
    "rsc": "../../../packages/ui/constitution/rsc.yml",
    "tokens": "../../../packages/ui/constitution/tokens.yml"
  },
  "validation": {
    "tools": [
      "validate_typescript_rules",
      "validate_rsc_boundary",
      "validate_server_actions",
      "validate_styling_rules",
      "validate_accessibility"
    ],
    "mcpServers": [
      "react-validation",
      "aibos-component-generator",
      "aibos-a11y-validation"
    ],
    "checks": [
      "typescript-compliance",
      "rsc-boundary-compliance",
      "server-action-validation",
      "styling-compliance",
      "accessibility-compliance"
    ]
  },
  "related": {
    "documents": [
      "./naming.md",
      "./folder-structure.md",
      "./documentation-standard.md"
    ],
    "constitution": [
      "../../../packages/ui/constitution/components.yml",
      "../../../packages/ui/constitution/rsc.yml",
      "../../../packages/ui/constitution/tokens.yml"
    ],
    "mcpServers": [
      ".mcp/react/server.mjs",
      ".mcp/component-generator/server.mjs",
      ".mcp/a11y/server.mjs"
    ]
  },
  "metadata": {
    "steward": "AI-BOS Platform Team",
    "reviewFrequency": "quarterly",
    "changeProcess": "documentation-governance.md",
    "tags": ["coding-standards", "typescript", "react", "nextjs", "mcp", "accessibility"]
  }
}

